<apex:page language="{!IF(ISNULL(language),'en_US',language)}" id="ProfilePage" showHeader="false" standardStylesheets="false" cache="false" title="{!$Label.Profile}" controller="aSiteProfileController" action="{!validate}">
<apex:composition template="{!$Site.Template}">
<apex:define name="body">
<style>
.selected {
    background: rgba(38,185,154,.16);
    border-color: rgba(221,221,221,0.780392);
}
</style>
<script>
    
    function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }

    function init(){
                
        var mens = getUrlVars()["mens"];
    
        if (mens == "1"){
            new PNotify({
                title: 'Conta alterada',
                text: 'A conta foi alterada com sucesso!',
                type: 'success',
                styling: 'bootstrap3'
                });        
        }
    }
</script>
<body class="nav-md footer_fixed" onload="init()">
    <center>
        <br/>
        <br/>
        <apex:outputPanel layout="block" styleClass="" style="margin-top:20px;">
            <apex:panelGrid cellpadding="0" cellspacing="0" bgcolor="white" styleClass="panel-default"> 
                <apex:panelGroup >
                <apex:form id="profileForm">                    
                <div class="row">
                    <div class="" style="min-width:800px">
                        <div class="">
                            <div class="page-title">
                                <div class="title_left">
                                <h3>{!$Label.Profile}</h3>
                                </div>
                            </div>
                        </div>            
                        <div class="clearfix"></div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <div class="x_panel">
                                    <div class="x_title">
                                        <h2>{!$Label.User_report}</h2>
                                        <ul class="nav navbar-right panel_toolbox">
                                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                                        </ul>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div class="col-xs-12 profile_left">                                           
                                            <h3>{!User.Name}</h3>                    
                                            <ul class="list-unstyled user_data">
                                                <li><i class="fa fa-phone user-profile-icon"></i> {!User.Phone__c}</li>
                                                <li><i class="fa fa-mobile-phone user-profile-icon"></i> {!User.MobilePhone__c}</li>
                                                <li><i class="fa fa-map-marker user-profile-icon"></i> {!User.Address__c}</li>
                                                <li><i class="fa fa-briefcase user-profile-icon"></i> {!User.Occupation__c}</li>                    
                                                <li class="m-top-xs"><i class="fa fa-external-link user-profile-icon"></i>
                                                    <a href="{!User.Site__c}" target="_blank">{!User.Site__c}</a>
                                                </li>
                                            </ul>                    
                                            <a class="btn btn-success" href="javascript:;" onclick="goEdit()"><i class="fa fa-edit m-right-xs"></i>{!$Label.Edit_Profile}</a>                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <apex:actionFunction action="{!editProfile}" name="goEdit" />
                <div class="row">
                    <div role="tabpanel" class="table-responsive" id="tab_content2" aria-labelledby="profile-tab">
                    <apex:pageBlock title="{!$ObjectType.Account.LabelPlural}" id="acc">
                    <apex:messages style="color:red"/>
                    <apex:pageblockTable value="{!Accounts}" var="s" styleclass="table table-striped jambo_table" onRowClick="highlightElem(this)">
                        <apex:column headerClass="column-title" headerValue="{!$ObjectType.SiteUserAccount__c.fields.Active__c.Label}" value="{!s.Active__c}" styleclass="{!IF(s.Active__c,'selected','')}"/>
                        <apex:column headerClass="column-title" headerValue="{!$ObjectType.Account.fields.Name.Label}" value="{!s.Account__r.Name}" styleclass="{!IF(s.Active__c,'selected','')}"/>
                        <apex:column headerClass="column-title" headerValue="{!$ObjectType.Account.fields.Nome_fantasia__c.Label}" value="{!s.Account__r.Nome_fantasia__c}" styleclass="{!IF(s.Active__c,'selected','')}"/>                        
                        <!--<apex:column headerClass="column-title" headerValue="{!$ObjectType.Account.fields.Grupo_de_Cuentas__c.Label}" value="{!s.Account__r.Grupo_de_Cuentas__c}" styleclass="{!IF(s.Active__c,'selected','')}"/>
                        <apex:column headerClass="column-title" headerValue="{!$ObjectType.Account.fields.CodigoSAP__c.Label}" value="{!s.Account__r.CodigoSAP__c}" styleclass="{!IF(s.Active__c,'selected','')}"/>
                        <apex:column headerClass="column-title" headerValue="{!$ObjectType.SiteUserAccount__c.fields.Hours_Spent__c.Label}" value="{!s.Hours_Spent__c}" styleclass="{!IF(s.Active__c,'selected','')}"/>-->
                        <!-- -->
                        <apex:column headerClass="column-title" headerValue="{!$Label.action}" styleclass="{!IF(s.Active__c,'selected','')}">
                            <apex:commandLink value="{!$Label.choose}" action="{!setActiveAccount}" rerender="acc">
                                <apex:param value="{!s.Id}" assignTo="{!accSelect}" name="toSelect"/>
                            </apex:commandLink>
                        </apex:column>
                        
                    </apex:pageblockTable>
                    </apex:pageBlock>
                    </div>
                </div>
                </apex:form> 
                </apex:panelGroup>
            </apex:panelGrid> 
        </apex:outputPanel>
    </center>
    <br/>
    </body>
</apex:define>
</apex:composition>
</apex:page>